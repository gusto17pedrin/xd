document.getElementById("email").addEventListener("change",function(){var email=this;if(verifyEmail(email.value)){alertMessage('warning','Email em formato inválido.')}});function verifyEmail(v){var email=v;if(email.indexOf('@')==-1||email.indexOf('.')==-1){return true;}else{return false;}}document.getElementsByClassName('form-btn-signin')[0].addEventListener('click',function(){var email=document.getElementById('email');var password=document.getElementById('password');var confirmPassword=document.getElementById('confirm-password');if(email.value==''||password.value==''){alertMessage('warning','Preencha todos os campos corretamente.');}else if(verifyEmail(email.value)){alertMessage('warning','Este e-mail não é válido.');}else{document.getElementsByClassName('form-btn-signin')[0].style.display='none';var data={'email':email.value,'password':password.value,}
var xhr=new XMLHttpRequest();xhr.open("POST","/api/signin/index.php",true);xhr.setRequestHeader("Content-Type","application/json");xhr.onreadystatechange=function(){if(xhr.status===200&&xhr.responseText.trim()!==''){document.getElementsByClassName('form-btn-signin')[0].style.display='flex';var data=JSON.parse(xhr.responseText);if(data.status==='success'){alertMessage('success',data.message);window.location.href='/';}else{alertMessage('error',data.message);}}else{try{document.getElementsByClassName('form-btn-signin')[0].style.display='flex';var data=JSON.parse(xhr.responseText);alertMessage('error',data.message);}catch(e){alertMessage('error','Erro ao fazer login');}}};xhr.send(JSON.stringify(data));}});