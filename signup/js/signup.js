document.getElementById("phone").addEventListener("keyup",function(){var phone=this;phone.value=maskPhone(phone.value);});document.getElementById("cpf").addEventListener("keyup",function(){var cpf=this;cpf.value=maskCPF(cpf.value);});document.getElementById("email").addEventListener("change",function(){var email=this;if(verifyEmail(email.value)){alertMessage('warning','Email em formato inválido.')}});document.getElementById("phone").addEventListener("change",function(){var phone=this;phone.value=maskPhone(phone.value);if(verifyPhone(unmaskPhone(phone.value))){alertMessage('warning','Telefone em formato inválido.<br><strong>Formato correto: (99) 99999-9999</strong>')}});function verifyEmail(v){var email=v;if(email.indexOf('@')==-1||email.indexOf('.')==-1){return true;}else{return false;}}function verifyPhone(v){var phone=v;if(phone.length!=11){return true;}else{return false;}}document.getElementsByClassName('form-btn-signup')[0].addEventListener('click',function(){var name=document.getElementById('full_name');var email=document.getElementById('email');var phone=document.getElementById('phone');var cpf=document.getElementById('cpf');var password=document.getElementById('password');var affiliated_code=localStorage.getItem('affiliated_code');var utm_source=localStorage.getItem('utm_source');var utm_medium=localStorage.getItem('utm_medium');var utm_campaign=localStorage.getItem('utm_campaign');var utm_term=localStorage.getItem('utm_term');var utm_content=localStorage.getItem('utm_content');if(email.value==''||phone.value==''||password.value==''){alertMessage('warning','Preencha todos os campos corretamente.');}else if(verifyEmail(email.value)){alertMessage('warning','Este e-mail não é válido.');}else if(verifyPhone(unmaskPhone(phone.value))){alertMessage('warning','Este telefone não é válido.');}else{document.getElementsByClassName('form-btn-signup')[0].style.display='none';var data={'name':name.value,'email':email.value,'phone':unmaskPhone(phone.value),'cpf':unmaskCPF(cpf.value),'password':password.value,'affiliated_code':affiliated_code,'utm_source':utm_source,'utm_medium':utm_medium,'utm_campaign':utm_campaign,'utm_term':utm_term,'utm_content':utm_content}
var xhr=new XMLHttpRequest();xhr.open("POST","/api/signup/index.php",true);xhr.setRequestHeader("Content-Type","application/json");xhr.onreadystatechange=function(){if(xhr.status===200&&xhr.responseText.trim()!==''){document.getElementsByClassName('form-btn-signup')[0].style.display='flex';var data=JSON.parse(xhr.responseText);if(data.status==='success'){alertMessage('success',data.message);try{dataLayer.push({'event':'cadastro'});}catch(err){};var url=window.location.href;if(url.indexOf('/join/')!=-1){window.location.href='/panel/deposit/';}else{window.location.href='/panel/deposit/';}}else{alertMessage('error',data.message);}}else{try{document.getElementsByClassName('form-btn-signup')[0].style.display='flex';var data=JSON.parse(xhr.responseText);alertMessage('error',data.message);}catch(e){alertMessage('error','Erro ao fazer login');}}};xhr.send(JSON.stringify(data));}});